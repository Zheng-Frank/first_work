<div *ngIf="!routineList || routineList.length === 0; else elseBlock">
    List is empty
</div>

<!-- Simple Display Mode -->
<ng-template #elseBlock>

    <q-table *ngIf="!fullDisplayMode" [rows]="routineList" [tableColumnDescriptors]="simpleColumnDescriptors"
        [compact]="true">
        <tr *tableRowTemplate="let routine;">
            <td>{{routineList.indexOf(routine) + 1}}</td>
            <td>
                <div class="{{isOverdue(routine) ? 'text-danger' : ''}}">
                    <strong>{{routine.name}}</strong>
                    <br>
                    <small>{{routine.description}} </small>
                </div>
            </td>
            <td>
                <button class="btn btn-primary" [disabled]="routine.name === 'Timekeeping'"
                    (click)="createReport(routine)">Report</button>
            </td>
        </tr>
    </q-table>

    <!-- Full Display Mode -->
    <q-table *ngIf="fullDisplayMode" [rows]="routineList" [tableColumnDescriptors]="fullColumnDescriptors"
        [compact]="true">
        <tr *tableRowTemplate="let routine;" class="{{routine.disabled? 'disabled' : ''}}">
            <td>{{routineList.indexOf(routine) + 1}}</td>
            <td>
                <!-- Name and Description -->
                <div>
                    <strong>{{routine.name}}</strong>
                    <br>
                    <small>{{routine.description}} </small>
                </div>
            </td>
            <td>
                <!-- Recurrence -->
                <div>
                    Every {{displayRecurrenceInHours(routine.recurrence).toFixed(1)}} hours
                </div>
            </td>
            <td>
                <!-- Created Date -->
                <div>

                    {{routine.createdAt | date: 'shortDate'}}

                </div>
            </td>
            <td>{{routine.version}}</td> <!-- Version -->
            <td class="text-nowrap">
                <!-- Assignees -->
                {{routine.assignees.length}}
            </td>
            <td>
                <!-- Metrics -->
                <ul>
                    <li *ngFor="let metric of routine.metrics">
                        {{metric.name}}
                    </li>
                </ul>
            </td>
            <td>
                <button class="btn btn-link" (click)="edit(routine)">Edit</button>
            </td>
        </tr>
    </q-table>
</ng-template>

<!-- Modal that appears for creating a report -->
<q-modal #routineReportModal>
    <div *ngIf="routineInReporting">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">Ã—</span>
        </button>
        <h4 class="text-center">Report for: {{routineInReporting.name}}</h4>
        <hr>

        <q-form-builder [object]="routineInstanceResults" [fieldDescriptors]="routineInstanceFieldDescriptors"
            (submit)="submitReport($event)" (cancel)="routineReportModal.hide()" [showDelete]="false">
        </q-form-builder>
    </div>
</q-modal>