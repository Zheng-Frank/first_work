<div class="card mb-2 p-3">

  <h3 class="card-title text-center pt-4 pb-2"><i class="fas fa-archway"></i> Chains (Associated Restaurants)</h3>

  <div *ngIf="isAlreadyAssociated">
    <div class="d-flex flex-column align-items-center p-2">
      <p>This Restaurant is a chain of:</p>
      <h4>{{associatedTo.name}}</h4>
      <p>HQ: {{associatedTo.headquarter}}</p>
      <div class="d-flex justify-content-end">
        <button class="btn btn-link" (click)="removeAssociation()">Remove Association</button>
      </div>
    </div>
  </div>

  <div *ngIf="!isAlreadyAssociated">
    <div>
      <p class="pt-3 pb-3">Associate this restaurant to an existing chain.</p>
      <label>Associate this restaurant to chain:</label>

      <div class="d-flex">
        <select [(ngModel)]="selectedChainToAssociate" class="form-control">
          <option value="" default>Select one</option>
          <option value="{{chain._id}}" *ngFor="let chain of chains">{{chain.headquarter}} - {{chain.name}}</option>
        </select>
        <button class="btn btn-primary ml-3" (click)="associateToChain()" [disabled]="!selectedChainToAssociate">Associate</button>
      </div>
      
      <div>
        <button class="btn btn-link pl-0" (click)="addChainModal.show()">+ Add chain</button>
      </div>
    </div>
  </div>

  <q-modal #addChainModal>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">Ã—</span>
    </button>

    <h4>Add chain</h4>
    <hr>

    <q-form-builder 
      [object]="chainInEditting" 
      [fieldDescriptors]="chainFieldDescriptors" 
      (submit)="addChain($event)" 
      (cancel)="addChainModal.hide()" 
      [showDelete]="false">
    </q-form-builder>
  </q-modal>

</div>