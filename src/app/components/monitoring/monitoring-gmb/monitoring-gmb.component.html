<h1 class="text-center">Restaurants Listed By Score<br><small>{{filteredRows.length}}</small></h1>

<label class="checkbox-inline">
    <input type="checkbox" [(ngModel)]="showOnlyPublished" (change)="filter()"> Only Published GMB</label>

<label class="checkbox-inline">
    <input type="checkbox" [(ngModel)]="showOnlyDisabled" (change)="filter()"> Only disabled</label>

<label class="checkbox-inline">
    <input type="checkbox" [(ngModel)]="showNotDisabled" (change)="filter()"> Not disabled</label>
<label class="checkbox-inline">
    <input type="checkbox" [(ngModel)]="showMissingWebsite" (change)="filter()"> Only Missing Website</label>

<label class="checkbox-inline">
    <input type="checkbox" [(ngModel)]="missingPickupSettings" (change)="filter()"> Missing Pickup Payment</label>


<div class="clearfix my-2">
    <div class="float-left form-inline">
        <select class="form-control mr-2 mb-1" [(ngModel)]="managedDomain" (change)="filter()">
            <option>Manged Domains</option>
            <option>only active</option>
            <option>expired</option>
        </select>
    </div>
</div>
<table class="table">
    <tr>
        <th>#</th>
        <th>Restaurant</th>
        <th>Website</th>
        <th>Domain Type</th>
        <th>Domain</th>
        <th>Domain Expiry</th>
        <th>Score</th>
        <th>Agent</th>
        <th>GMB</th>
        <th>Created</th>
    </tr>
    <tr *ngFor="let row of filteredRows; let i = index" class="{{row.restaurant.disabled ? 'app-strike' : ''}}">
        <th>{{i + 1}}</th>
        <td>
            <a routerLink="/restaurants/{{row.restaurant._id}}">{{row.restaurant.name}}</a>
            <div class="text-muted">
                <small>{{row.restaurant.googleAddress?.formatted_address}}</small>
            </div>
        </td>
        <td>
            {{row.restaurant?.web?.qmenuWebsite}}
        </td>
        <td>
            {{row.domainType}}
        </td>
        <td>
            {{row.domain?.name}}
        </td>
        <td>
            {{row.domain?.expiry}}
        </td>
        <td>
            {{row.restaurant.score}}
        </td>
        <td>
            {{(row.restaurant.rateSchedules || [])[0]?.agent || 'N/A'}}
        </td>
        <td>
            <span *ngIf="!row.location?.status" class="text-danger">No Main</span>
            <span *ngIf="row.location?.status && row.location?.status !== 'Published'"
                class="text-danger">{{row.location?.status}}</span>
            <span *ngIf="row.location?.status === 'Published'" class="text-success">âœ“</span>
        </td>
        <td>
            {{row.restaurant.createdAt | ago : now}}
        </td>
    </tr>

</table>