<div class="container-fluid">

  <div class="row">
    <h2 class="col-12 text-center"> Qmenu / BeyondMenu - Single Source of Truth ({{filteredRows.length}}) </h2>
  </div>

  <div class="my-5">
    <div class="row">
      <div class="col-md-3 d-flex align-items-center">
        <label for="qmSearchText" class="m-0 p-0">Search </label>
        <input type="text" class="ml-3 form-control" placeholder="Search by RT name, address or phone" id="qmSearchText" [(ngModel)]="filters.searchText" (ngModelChange)="filter()">
      </div>

      <div class="col-md-9">
        <div class="ml-1 d-flex align-items-center">

          <select class="form-control mr-2" [(ngModel)]="filters.owner" (change)="filter()" name="activeIn">
            <option [ngValue]="'BelongingQmAndBm'" selected>Belonging to QM and BM</option>
            <option [ngValue]="'BelongingQM'">Belonging to QM</option>
            <option [ngValue]="'BelongingBM'">Belonging to BM</option>
          </select>

          <select class="form-control mr-2" [(ngModel)]="filters.activeIn" (change)="filter()" name="activeIn">
            <option [ngValue]="'ActiveInQMorBm'" selected>Active in QM or BM</option>
            <option [ngValue]="'ActiveInQMandBm'">Active in QM and BM</option>
            <option [ngValue]="'ActiveInQM'">Active in QM</option>
            <option [ngValue]="'ActiveInBM'">Active in BM</option>
            <option [ngValue]="'ActiveInBMnotQM'">Active in BM but not in QM</option>
            <option [ngValue]="'ActiveInQMnotBM'">Active in QM but not in BM</option>
            <option [ngValue]="'InactiveInQMandBM'">Inactive in QM and BM</option>
            <option [ngValue]="'InactiveInQM'">Inactive in QM</option>
            <option [ngValue]="'InactiveInBM'">Inactive in BM</option>
          </select>

          <select class="form-control mr-2" [(ngModel)]="filters.hasPlaceId" (change)="filter()" name="hasPlaceId">
            <option [ngValue]="true" selected>Has Place ID</option>
            <option [ngValue]="false">Missing Place ID</option>
          </select>

          <select class="form-control" [(ngModel)]="filters.sameName" (change)="filter()" name="sameName">
            <option [ngValue]="true">Same name in QM and BM</option>
            <option [ngValue]="false">Different name in QM and BM</option>
          </select>

        </div>
      </div>
    </div>
    <div class="row d-flex justify-content-end">
      <button class="btn btn-link" (click)="clearFilter()">Reset Filters</button>
    </div>
  </div>

  <!--  <div>qm total: {{stats.qmTotal}}</div>-->
  <!--  <div>bm total: {{stats.bmTotal}}</div>-->

  <table class="table table-sm my-5">
    <tr>
      <th>#</th>
      <th></th>
    </tr>
    <tr *ngFor="let row of filteredRows; let i = index">
      <td>{{i + 1}}</td>
      <td>
        <div class="d-flex justify-content-between">
          <div class="d-flex flex-column">
            <div>
              <span *ngIf="row._id">(Q) {{row.name}} </span>
              <span *ngIf="row._bid">(B) {{row.bname}}</span>
            </div>
            <span>place_id: {{row.place_id || row.bplace_id}}</span>
          </div>
          <div class="d-flex align-items-center justify-content-end">
            <img *ngIf="row._id" src="./assets/images/qmenu.png" style="height: 28px; width: 28px"/>
            <img *ngIf="row._bid" src="./assets/images/beyondmenu.png" style="height: 28px; width: 28px"/>
          </div>
        </div>

      </td>
    </tr>
  </table>
</div>


