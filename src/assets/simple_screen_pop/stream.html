<!DOCTYPE html>
<html lang="en-US">
	<head>
		<title>Amazon Connect</title>
        <meta charset="UTF-8"> 
		<script src="../js/connect-streams-min.js"></script> 
		<script src="../js/amazon-connect-chat.js"></script> 
        <style>
            *, body {
                margin: 0;
                padding:0
            }
            iframe {
                border: 0px
            }
            #containerDiv {
                width: 400px;
                height: 800px
            }
        </style>
	</head>
	<body>
        <div id="containerDiv"></div>
		<script>
            /*************** Begin Mod Area ***************/

            /* Edit the instanceName below with your instance alias */
            var instanceName = "qmenu";

            /*************** End Mod Area ***************/
			connect.core.initCCP(containerDiv, {
                ccpUrl:"https://" + instanceName + ".awsapps.com/connect/ccp-v2/",
                loginPopup: true,
                region: "eu-central-1",
                softphone: {
                    allowFramedSoftphone: true
                 }
			});
            connect.contact(function(contact) {
                contact.onConnecting(function(contact) {
                    var attributeMap = contact.getAttributes();
                    var baseURL = attributeMap.screenPopURL.value;
                    var searchString = attributeMap.screenPopValue.value;
                    var screenpopURL = baseURL + searchString;
                    var customerNumber = attributeMap.customerNumber.value;
                    console.log(customerNumber);
                    window.open(screenpopURL);
                });
            });
		</script>
	</body>
</html>
